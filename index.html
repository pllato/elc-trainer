<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ELC Grammar Practice</title>
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Tailwind CSS –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Tahoma&family=Trebuchet+MS&display=swap" rel="stylesheet">
  <style>
    /* –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∏–ª—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
    body {
      font-family: 'Trebuchet MS', 'Helvetica', 'Arial', sans-serif; /* –û—Å–Ω–æ–≤–Ω–æ–π —à—Ä–∏—Ñ—Ç */
      background-color: #F5F5F5; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω */
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ */
    h1, h2, h3 {
      font-family: 'Montserrat', sans-serif; /* –®—Ä–∏—Ñ—Ç –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ */
      text-transform: uppercase; /* –í–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä */
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è –ª–æ–≥–æ—Ç–∏–ø–∞ */
    .logo {
      font-family: 'Montserrat', sans-serif;
      text-transform: uppercase;
      color: #373D8D; /* –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏–Ω–∏–π —Ü–≤–µ—Ç */
      cursor: pointer;
    }
    .logo span {
      color: #D72638; /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –∞–∫—Ü–µ–Ω—Ç–æ–≤ */
    }
    /* –ü–æ–¥—Ç–µ–∫—Å—Ç –ª–æ–≥–æ—Ç–∏–ø–∞ */
    .logo-subtext {
      font-family: 'Trebuchet MS', sans-serif;
      font-size: 0.8rem;
      color: #373D8D;
    }
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –ø–æ–¥ –ª–æ–≥–æ—Ç–∏–ø–æ–º */
    .logo-description {
      font-family: 'Trebuchet MS', sans-serif;
      font-size: 0.7rem;
      color: #373D8D;
      margin-top: 0.2rem;
    }
    /* –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω —Ñ–æ–Ω–∞ */
    .pattern-bg {
      background-image: linear-gradient(45deg, #373D8D 25%, transparent 25%, transparent 75%, #373D8D 75%, #373D8D), 
                        linear-gradient(45deg, #373D8D 25%, transparent 25%, transparent 75%, #373D8D 75%, #373D8D);
      background-size: 20px 20px;
      background-color: #FFFFFF;
    }
    /* –®—Ä–∏—Ñ—Ç –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
    button {
      font-family: 'Trebuchet MS', sans-serif;
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–∫—Ü–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
    .stats {
      color: #373D8D; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
      font-size: 0.9rem;
      margin-bottom: 1rem;
      border-left: 4px solid #D72638; /* –ö—Ä–∞—Å–Ω–∞—è –ø–æ–ª–æ—Å–∞ —Å–ª–µ–≤–∞ */
      padding-left: 0.5rem;
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —á—ë—Ä–Ω—ã–π —Ñ–æ–Ω */
      z-index: 1000;
    }
    /* –ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
    .modal-content {
      background-color: #FFFFFF; /* –ë–µ–ª—ã–π —Ñ–æ–Ω */
      margin: 5% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 400px; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ 400px */
      border-radius: 8px; /* –°–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–µ —É–≥–ª—ã */
      text-align: center;
      max-height: 80vh;
      overflow-y: auto;
    }
    .modal-content h2 {
      color: #373D8D; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
    }
    .modal-content p {
      /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—á—ë—Ä–Ω—ã–π), –∂—ë–ª—Ç—ã–π —Ü–≤–µ—Ç —É–±—Ä–∞–Ω */
    }
    .modal-content button {
      background-color: #373D8D; /* –°–∏–Ω–∏–π —Ñ–æ–Ω –∫–Ω–æ–ø–∫–∏ */
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .modal-content button:hover {
      background-color: #2A3171; /* –¢—ë–º–Ω–æ-—Å–∏–Ω–∏–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    }
    .modal-log {
      margin-top: 1rem;
      text-align: left;
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid #ccc;
      padding: 10px;
      font-size: 0.8rem;
      color: inherit; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–π —Å—Å—ã–ª–∫–∏ "–ê–¥–º–∏–Ω–∫–∞" */
    .admin-link {
      display: block;
      text-align: center;
      color: #373D8D; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
      font-size: 0.9rem; /* –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
      margin-top: 0.5rem;
      text-decoration: underline; /* –ü–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ –∫–∞–∫ —É —Å—Å—ã–ª–∫–∏ */
    }
    .admin-link:hover {
      color: #2A3171; /* –¢—ë–º–Ω–æ-—Å–∏–Ω–∏–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è */
    .password-modal-input {
      width: 100%;
      padding: 8px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }
    .password-error {
      color: #D72638; /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –æ—à–∏–±–∫–∏ */
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen">
  <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
  <div id="start-screen" class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
    <!-- –õ–æ–≥–æ—Ç–∏–ø –∏ –ø–æ–¥—Ç–µ–∫—Å—Ç -->
    <div class="text-center mb-6">
      <h1 class="logo text-4xl font-bold">ELC</h1>
      <p class="logo-subtext">English Lifestyle Communication</p>
      <!-- –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç "–¢—Ä–µ–Ω–∞–∂–µ—Ä –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä" -->
      <p class="logo-description">–¢—Ä–µ–Ω–∞–∂–µ—Ä –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä</p>
    </div>
    <!-- –ü–æ–ª–µ –¥–ª—è –∏–º–µ–Ω–∏ -->
    <div class="mb-4">
      <label for="name" class="block text-sm font-medium text-gray-700">–í–∞—à–µ –∏–º—è</label>
      <input type="text" id="name" class="mt-1 p-2 w-full border rounded-md" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
    </div>
    <!-- –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è -->
    <div class="mb-4">
      <label for="level" class="block text-sm font-medium text-gray-700">–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å</label>
      <select id="level" class="mt-1 p-2 w-full border rounded-md">
        <option value="beginner1">Beginner Part One</option>
        <option value="beginner2">Beginner Part Two</option>
        <option value="elementary">Elementary</option>
        <option value="preintermediate">Pre-Intermediate</option>
        <option value="intermediate">Intermediate</option>
        <option value="upperintermediate">Upper-Intermediate</option>
      </select>
    </div>
    <!-- –í—ã–±–æ—Ä —É—Ä–æ–∫–∞ -->
    <div class="mb-6">
      <label for="lesson" class="block text-sm font-medium text-gray-700">–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–∫</label>
      <select id="lesson" class="mt-1 p-2 w-full border rounded-md">
        <!-- Lessons will be populated dynamically -->
      </select>
    </div>
    <!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –ø—Ä–∞–∫—Ç–∏–∫—É" -->
    <button id="start-btn" class="w-full bg-[#373D8D] text-white p-2 rounded-md mb-2 hover:bg-[#2A3171]">–ù–∞—á–∞—Ç—å –ø—Ä–∞–∫—Ç–∏–∫—É</button>
    <!-- –¢–µ–∫—Å—Ç–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ "–ê–¥–º–∏–Ω–∫–∞" -->
    <a href="#" id="admin-btn" class="admin-link">–ê–¥–º–∏–Ω–∫–∞</a>
    <p id="start-feedback" class="text-md mb-4"></p>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –∞–¥–º–∏–Ω–∫–∏ -->
  <div id="admin-screen" class="hidden bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
    <div class="flex justify-between items-center mb-4">
      <div class="logo text-2xl font-bold" onclick="goBackToStart()">ELC</div>
      <h1 class="text-2xl font-bold">–ê–¥–º–∏–Ω–∫–∞</h1>
      <div></div> <!-- –ü—É—Å—Ç–æ–π div –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è -->
    </div>
    <!-- –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ GitHub —Ç–æ–∫–µ–Ω–∞ -->
    <div class="mb-4">
      <label for="github-token" class="block text-sm font-medium text-gray-700">GitHub —Ç–æ–∫–µ–Ω</label>
      <input type="password" id="github-token" class="mt-1 p-2 w-full border rounded-md" placeholder="–í–≤–µ–¥–∏—Ç–µ GitHub —Ç–æ–∫–µ–Ω">
    </div>
    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ —É—Ä–æ–∫–∞ -->
    <div class="mb-4">
      <label for="lesson-file" class="block text-sm font-medium text-gray-700">–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π —É—Ä–æ–∫ (.js —Ñ–∞–π–ª)</label>
      <input type="file" id="lesson-file" accept=".js" class="mt-1 p-2 w-full border rounded-md">
    </div>
    <button id="upload-lesson-btn" class="w-full bg-[#373D8D] text-white p-2 rounded-md mb-2 hover:bg-[#2A3171]">–ó–∞–≥—Ä—É–∑–∏—Ç—å —É—Ä–æ–∫ –Ω–∞ GitHub</button>
    <!-- –£–¥–∞–ª–µ–Ω–∏–µ —É—Ä–æ–∫–∞ -->
    <div class="mb-4">
      <label for="delete-lesson" class="block text-sm font-medium text-gray-700">–£–¥–∞–ª–∏—Ç—å —É—Ä–æ–∫</label>
      <select id="delete-lesson" class="mt-1 p-2 w-full border rounded-md">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è</option>
        <!-- Lessons will be populated dynamically -->
      </select>
    </div>
    <button id="delete-lesson-btn" class="w-full bg-[#D72638] text-white p-2 rounded-md mb-2 hover:bg-[#B72030]">–£–¥–∞–ª–∏—Ç—å —É—Ä–æ–∫</button>
    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ index.html -->
    <div class="mb-4">
      <label for="index-html-file" class="block text-sm font-medium text-gray-700">–û–±–Ω–æ–≤–∏—Ç—å index.html</label>
      <input type="file" id="index-html-file" accept=".html" class="mt-1 p-2 w-full border rounded-md">
    </div>
    <button id="upload-index-html-btn" class="w-full bg-[#28A745] text-white p-2 rounded-md mb-2 hover:bg-[#1e7e34]">–û–±–Ω–æ–≤–∏—Ç—å index.html –Ω–∞ GitHub</button>
    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ index.js -->
    <div class="mb-4">
      <label for="index-js-file" class="block text-sm font-medium text-gray-700">–û–±–Ω–æ–≤–∏—Ç—å index.js</label>
      <input type="file" id="index-js-file" accept=".js" class="mt-1 p-2 w-full border rounded-md">
    </div>
    <button id="upload-index-js-btn" class="w-full bg-[#28A745] text-white p-2 rounded-md mb-2 hover:bg-[#1e7e34]">–û–±–Ω–æ–≤–∏—Ç—å index.js –Ω–∞ GitHub</button>
    <p id="admin-feedback" class="text-md mb-4"></p>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∞–∫—Ç–∏–∫–∏ -->
  <div id="practice-screen" class="hidden bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
    <div class="flex justify-between items-center mb-4">
      <div class="logo text-2xl font-bold" onclick="goBackToStart()">ELC</div>
      <h1 class="text-2xl font-bold">–ü—Ä–∞–∫—Ç–∏–∫–∞ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏</h1>
      <div></div> <!-- –ü—É—Å—Ç–æ–π div –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è -->
    </div>
    <p class="text-lg mb-2">–ü—Ä–∏–≤–µ—Ç, <span id="user-name"></span>!</p>
    <p class="text-md mb-4">–£—Ä–æ–≤–µ–Ω—å: <span id="user-level"></span>, <span id="user-lesson"></span></p>
    <button id="start-practice-btn" class="w-full bg-[#373D8D] text-white p-2 rounded-md mb-2 hover:bg-[#2A3171]">–ù–∞—á–∞—Ç—å –ø—Ä–∞–∫—Ç–∏–∫—É</button>
    <button id="restart-listening-btn" class="hidden w-full bg-[#D72638] text-white p-2 rounded-md mb-4 hover:bg-[#B72030]">–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ</button>
    <p id="feedback" class="text-md mb-4"></p>
    <div class="mb-6">
      <p class="text-lg font-semibold">–ü—Ä–∏–º–µ—Ä—ã:</p>
      <div id="intro-examples" class="text-sm text-gray-600 mb-4"></div>
    </div>
    <div class="mb-6">
      <p class="text-lg font-semibold">–ü—Ä–æ–≥—Ä–µ—Å—Å:</p>
      <div id="total-progress" class="mb-2">
        <p class="text-sm">–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: <span id="total-progress-text">0/0</span></p>
        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-1">
          <div id="total-progress-bar" class="bg-[#373D8D] h-2.5 rounded-full" style="width: 0%"></div>
        </div>
      </div>
      <div id="progress-bars"></div>
    </div>
    <div class="mb-6">
      <p class="text-lg font-semibold">–ü—Ä–æ—Ç–æ–∫–æ–ª:</p>
      <div id="stats" class="stats"></div>
      <div id="log" class="h-40 overflow-y-auto border p-2 text-sm"></div>
    </div>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–∞ -->
    <div id="completion-modal" class="modal">
      <div class="modal-content">
        <h2 class="text-2xl font-bold mb-2">–£—Ä–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω!</h2>
        <p id="congratulations" class="text-md mb-4"></p>
        <p class="text-sm mb-2">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—Å–ª–∞–Ω—ã –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—é.</p>
        <div class="modal-log" id="modal-log"></div>
        <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –≤ "–ó–∞–≤–µ—Ä—à–∏—Ç—å" -->
        <button onclick="startNewTraining()" class="mt-4">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è -->
  <div id="password-modal" class="modal">
    <div class="modal-content">
      <h2 class="text-2xl font-bold mb-2">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</h2>
      <input type="password" id="password-input" class="password-modal-input" placeholder="–ü–∞—Ä–æ–ª—å">
      <p id="password-error" class="password-error"></p>
      <button onclick="checkPassword()" class="mt-4">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
    </div>
  </div>

  <script src="index.js"></script>
  <script>
    // –ü–æ–¥–±–∞–¥—Ä–∏–≤–∞—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    const encouragementMessages = [
      "–¢—ã –±–æ–ª—å—à–æ–π –º–æ–ª–æ–¥–µ—Ü! üåü –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞, —Ç—ã —Å–ø—Ä–∞–≤–∏–ª—Å—è —Å —É—Ä–æ–∫–æ–º –Ω–∞ —É—Ä–∞! –¢—ã —É–∂–µ –≥–æ–≤–æ—Ä–∏—à—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∫–∞–∫ –Ω–æ—Å–∏—Ç–µ–ª—å! üí™",
      "–ú–æ–ª–æ–¥–µ—Ü, —Ç—ã —Å–ø—Ä–∞–≤–∏–ª—Å—è –±–ª–µ—Å—Ç—è—â–µ! üéâ –£—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω, —Ç—ã –Ω–∞ –≤—ã—Å–æ—Ç–µ! –¢—ã —É–∂–µ –≤–ª–∞–¥–µ–µ—à—å –∞–Ω–≥–ª–∏–π—Å–∫–∏–º –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π –ø—Ä–æ—Ñ–∏! ‚ú®",
      "–£—Ö, –∫–∞–∫ –∑–¥–æ—Ä–æ–≤–æ! üåü –¢—ã –ø—Ä–æ—à—ë–ª —É—Ä–æ–∫ —Å –ª—ë–≥–∫–æ—Å—Ç—å—é! –¢—ã —É–∂–µ –≥–æ–≤–æ—Ä–∏—à—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∫–∞–∫ –Ω–æ—Å–∏—Ç–µ–ª—å, —ç—Ç–æ –ø–æ—Ç—Ä—è—Å–∞—é—â–µ! üí™",
      "–¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π —á–µ–º–ø–∏–æ–Ω! üèÜ –£—Ä–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω, —Ç—ã –±–æ–ª—å—à–æ–π –º–æ–ª–æ–¥–µ—Ü! –¢—ã —É–∂–µ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—à—å –∫–∞–∫ –Ω–æ—Å–∏—Ç–µ–ª—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ! üåü",
      "–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! üéâ –¢—ã —Å–ø—Ä–∞–≤–∏–ª—Å—è —Å —É—Ä–æ–∫–æ–º –Ω–∞ –≤—Å–µ 100%! –¢—ã —É–∂–µ –æ–±—â–∞–µ—à—å—Å—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∫–∞–∫ –Ω–æ—Å–∏—Ç–µ–ª—å, —ç—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ! üí™",
      "–í–∞—É, —Ç—ã —Å—É–ø–µ—Ä! üåü –£—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω, –∏ —Ç—ã —É–∂–µ –≥–æ–≤–æ—Ä–∏—à—å –∫–∞–∫ –Ω–æ—Å–∏—Ç–µ–ª—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! üöÄ",
      "–û—Ç–ª–∏—á–Ω–æ —Å—Ä–∞–±–æ—Ç–∞–Ω–æ! üéâ –¢—ã –∑–∞–≤–µ—Ä—à–∏–ª —É—Ä–æ–∫, –∏ —Ç–≤–æ–π –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –∑–≤—É—á–∏—Ç –∫–∞–∫ —É –Ω–æ—Å–∏—Ç–µ–ª—è! –¢—ã –∑–≤–µ–∑–¥–∞! ‚≠ê",
      "–ö–∞–∫ –∫—Ä—É—Ç–æ! üåü –¢—ã –ø—Ä–æ—à—ë–ª —É—Ä–æ–∫, –∏ —Ç–≤–æ–π –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —É–∂–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –Ω–æ—Å–∏—Ç–µ–ª—è! –ì–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π! üíñ",
      "–¢—ã —Å–ø—Ä–∞–≤–∏–ª—Å—è –Ω–∞ —É—Ä–∞! üèÜ –£—Ä–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω, –∏ —Ç—ã —É–∂–µ –æ–±—â–∞–µ—à—å—Å—è –∫–∞–∫ –Ω–æ—Å–∏—Ç–µ–ª—å! –≠—Ç–æ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞! üéà",
      "–°—É–ø–µ—Ä, —Ç—ã —Å–¥–µ–ª–∞–ª —ç—Ç–æ! üåü –£—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω, –∏ —Ç—ã —É–∂–µ –≥–æ–≤–æ—Ä–∏—à—å –∫–∞–∫ –Ω–æ—Å–∏—Ç–µ–ª—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ! –¢—ã –º–æ–ª–æ–¥–µ—Ü! üí™"
    ];

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ SpeechRecognition
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      alert("–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç SpeechRecognition API. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä, Google Chrome.");
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏
    const recognition = SpeechRecognition ? new SpeechRecognition() : null;
    if (recognition) {
      recognition.lang = 'en-US';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;
      recognition.continuous = true;
    }

    let userName = '';
    let userLevel = '';
    let userLesson = '';
    let progress = {};
    let spokenHistory = [];
    let logEntries = [];
    let isListening = false;
    let lastSpeechTime = Date.now();
    let startTime = null;
    let endTime = null;
    let lessonCompleted = false;
    let currentLessonData = null;

    // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GitHub
    const GITHUB_OWNER = 'pllato';
    const GITHUB_REPO = 'elc-trainer';
    const GITHUB_PATH = 'lessons';

    // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
    const ADMIN_PASSWORD = 'admin123'; // –ó–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å

    // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
    const startScreen = document.getElementById('start-screen');
    const practiceScreen = document.getElementById('practice-screen');
    const adminScreen = document.getElementById('admin-screen');
    const startBtn = document.getElementById('start-btn');
    const adminBtn = document.getElementById('admin-btn');
    const startPracticeBtn = document.getElementById('start-practice-btn');
    const restartListeningBtn = document.getElementById('restart-listening-btn');
    const feedback = document.getElementById('feedback');
    const startFeedback = document.getElementById('start-feedback');
    const adminFeedback = document.getElementById('admin-feedback');
    const statsDiv = document.getElementById('stats');
    const progressBars = document.getElementById('progress-bars');
    const logDiv = document.getElementById('log');
    const userNameEl = document.getElementById('user-name');
    const userLevelEl = document.getElementById('user-level');
    const userLessonEl = document.getElementById('user-lesson');
    const completionModal = document.getElementById('completion-modal');
    const congratulationsEl = document.getElementById('congratulations');
    const modalLog = document.getElementById('modal-log');
    const levelSelect = document.getElementById('level');
    const lessonSelect = document.getElementById('lesson');
    const lessonFileInput = document.getElementById('lesson-file');
    const uploadLessonBtn = document.getElementById('upload-lesson-btn');
    const githubTokenInput = document.getElementById('github-token');
    const indexHtmlFileInput = document.getElementById('index-html-file');
    const uploadIndexHtmlBtn = document.getElementById('upload-index-html-btn');
    const indexJsFileInput = document.getElementById('index-js-file');
    const uploadIndexJsBtn = document.getElementById('upload-index-js-btn');
    const deleteLessonSelect = document.getElementById('delete-lesson');
    const deleteLessonBtn = document.getElementById('delete-lesson-btn');
    const passwordModal = document.getElementById('password-modal');
    const passwordInput = document.getElementById('password-input');
    const passwordError = document.getElementById('password-error');
    const totalProgressText = document.getElementById('total-progress-text');
    const totalProgressBar = document.getElementById('total-progress-bar');
    const introExamplesDiv = document.getElementById('intro-examples');

    // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ê–¥–º–∏–Ω–∫–∞"
    adminBtn.addEventListener('click', (e) => {
      e.preventDefault();
      if (passwordModal) {
        passwordModal.style.display = 'block';
        passwordInput.value = '';
        passwordError.textContent = '';
        passwordInput.focus();
      } else {
        console.error('Password modal not found');
      }
    });

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
    function checkPassword() {
      const enteredPassword = passwordInput.value.trim();

      if (enteredPassword === '') {
        passwordError.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å.';
        passwordInput.focus();
        return;
      }

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–≤–µ–¥—ë–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
      if (enteredPassword === ADMIN_PASSWORD) {
        // –ü–∞—Ä–æ–ª—å –≤–µ—Ä–Ω—ã–π, –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∞–¥–º–∏–Ω–∫—É
        passwordModal.style.display = 'none';
        if (startScreen && adminScreen) {
          startScreen.classList.add('hidden');
          adminScreen.classList.remove('hidden');
          githubTokenInput.value = ''; // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ —Ç–æ–∫–µ–Ω–∞
        } else {
          console.error('startScreen or adminScreen not found');
        }
      } else {
        // –ü–∞—Ä–æ–ª—å –Ω–µ–≤–µ—Ä–Ω—ã–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
        passwordError.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
        passwordInput.value = '';
        passwordInput.focus();
      }
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è Enter –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è
    passwordInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        checkPassword();
      }
    });

    // –ó–∞–≥—Ä—É–∑–∫–∞ —É—Ä–æ–∫–æ–≤ —Å GitHub —á–µ—Ä–µ–∑ API
    async function loadLessonsFromGitHub() {
      console.log('Starting to load lessons from GitHub API...');
      lessonsData.length = 0;
      deleteLessonSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è</option>';
      const token = githubTokenInput.value.trim();
      const headers = {
        'Accept': 'application/vnd.github.v3+json'
      };
      
      if (token) {
        headers['Authorization'] = `token ${token}`;
        console.log('Using GitHub token for authorization');
      } else {
        console.log('No GitHub token provided, proceeding without authorization');
      }

      try {
        const apiUrl = `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${GITHUB_PATH}`;
        console.log(`Fetching lessons from ${apiUrl}`);
        const response = await fetch(apiUrl, { headers });
        if (!response.ok) {
          const errorText = await response.text();
          throw new Error(`GitHub API error: ${response.statusText} (${response.status}) - ${errorText}`);
        }
        const files = await response.json();
        console.log('Files fetched from GitHub:', files);

        for (const file of files) {
          if (file.name.endsWith('.js')) {
            console.log(`Processing file: ${file.name}`);
            const option = document.createElement('option');
            option.value = file.name;
            option.textContent = file.name;
            deleteLessonSelect.appendChild(option);

            const fileResponse = await fetch(file.download_url);
            if (!fileResponse.ok) {
              console.error(`Failed to fetch lesson ${file.name}: ${fileResponse.statusText}`);
              continue;
            }
            const script = await fileResponse.text();
            console.log(`Fetched script for ${file.name}:`, script);
            try {
              eval(script);
              console.log(`Successfully evaluated lesson ${file.name}`);
            } catch (error) {
              console.error(`Error evaluating lesson ${file.name}:`, error.message);
              console.error(`Stack trace:`, error.stack);
            }
          } else {
            console.log(`Skipping non-js file: ${file.name}`);
          }
        }
        
        // –°–æ—Ä—Ç–∏—Ä—É–µ–º —É—Ä–æ–∫–∏ –ø–æ –Ω–æ–º–µ—Ä—É —É—Ä–æ–∫–∞
        lessonsData.sort((a, b) => {
          const lessonNumberA = parseInt(a.lesson.replace('lesson', ''), 10);
          const lessonNumberB = parseInt(b.lesson.replace('lesson', ''), 10);
          return lessonNumberA - lessonNumberB;
        });

        console.log('Lessons loaded from GitHub:', lessonsData);
        populateLessons();
      } catch (error) {
        console.error('Error loading lessons from GitHub:', error);
        if (startFeedback) {
          startFeedback.textContent = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —É—Ä–æ–∫–æ–≤ —Å GitHub: ' + error.message;
        } else if (feedback) {
          feedback.textContent = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —É—Ä–æ–∫–æ–≤ —Å GitHub: ' + error.message;
        }
      }
    }

    // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Ä–æ–∫–æ–≤
    function populateLessons() {
      const selectedLevel = levelSelect.value;
      lessonSelect.innerHTML = '';
      const lessons = lessonsData.filter(lesson => lesson.level === selectedLevel);
      console.log('Populating lessons for level:', selectedLevel, 'Found lessons:', lessons);
      if (lessons.length === 0) {
        const option = document.createElement('option');
        option.textContent = '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—Ä–æ–∫–æ–≤';
        option.disabled = true;
        lessonSelect.appendChild(option);
      } else {
        lessons.forEach(lesson => {
          const option = document.createElement('option');
          option.value = lesson.lesson;
          option.textContent = lesson.name;
          lessonSelect.appendChild(option);
        });
      }
    }

    loadLessonsFromGitHub();
    levelSelect.addEventListener('change', populateLessons);

    async function uploadFileToGitHub(file, filePath, token, successMessage) {
      if (!file) {
        adminFeedback.textContent = `–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –¥–ª—è ${filePath}.`;
        return false;
      }

      if (!token) {
        adminFeedback.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ GitHub —Ç–æ–∫–µ–Ω.';
        return false;
      }

      const reader = new FileReader();
      return new Promise((resolve, reject) => {
        reader.onload = async function(e) {
          const fileContent = e.target.result;

          try {
            let sha = null;
            try {
              const existingFileResponse = await fetch(
                `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`,
                {
                  headers: {
                    'Authorization': `token ${token}`,
                    'Accept': 'application/vnd.github.v3+json'
                  }
                }
              );
              if (existingFileResponse.ok) {
                const existingFile = await existingFileResponse.json();
                sha = existingFile.sha;
              }
            } catch (error) {
              // File doesn't exist, proceed with creating a new file
            }

            const content = btoa(unescape(encodeURIComponent(fileContent)));

            const response = await fetch(
              `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`,
              {
                method: 'PUT',
                headers: {
                  'Authorization': `token ${token}`,
                  'Accept': 'application/vnd.github.v3+json'
                },
                body: JSON.stringify({
                  message: `Update ${filePath}`,
                  content: content,
                  sha: sha
                })
              }
            );

            if (!response.ok) throw new Error(`GitHub API error: ${response.statusText}`);

            adminFeedback.textContent = successMessage;
            resolve(true);
          } catch (error) {
            adminFeedback.textContent = `–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ${filePath} –Ω–∞ GitHub: ${error.message}`;
            console.error(`Error uploading ${filePath} to GitHub:`, error);
            resolve(false);
          }
        };
        reader.onerror = function() {
          adminFeedback.textContent = `–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ ${filePath}.`;
          resolve(false);
        };
